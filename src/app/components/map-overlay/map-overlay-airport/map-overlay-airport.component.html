<div #container class="ol-popup card text-white bg-primary mb-3" style="visibility: hidden">
    <div *ngIf="this.airport">
        <div class="card-header">
            {{ this.getTitle() }}
            <app-map-overlay-button-close (click)="this.closeOverlay()"></app-map-overlay-button-close>
        </div>
        <div class="card-body">
            <div class="ol-popup-airport">
                <div class="tab-content" id="airport-tabs-content">
                    <!-- info tab -->
                    <div class="tab-pane show active" id="airport-info" role="tabpanel" aria-labelledby="airport-info-tab">
                        <p>Type: {{ this.getAirportTypeString() }}</p>
                        <p>{{ this.getPositionString(this.airport.position) }}</p>
                        <p>Elevation: {{ this.getElevationString(this.airport.elevation_m) }}</p>
                    </div>
                    <!-- runway tab -->
                    <div class="tab-pane" id="airport-runway" role="tabpanel" aria-labelledby="airport-runway-tab">
                        <table class="table table-sm table-striped table-condensed">
                            <tr>
                                <th>Runway</th>
                                <th>Surface</th>
                                <th>Dimensions</th>
                                <th>TORA[m]</th>
                                <th>LDA[m]</th>
                                <th>PAPI</th>
                            </tr>
                            <tr *ngFor="let runway of this.airport.runways">
                                <td>{{ runway.name }}</td>
                                <td>{{ runway.surface }}</td>
                                <td>{{ this.getRwyDimensionsString(runway) }}</td>
                                <td>{{ runway.tora1 ? runway.tora1 : '-' }} / {{ runway.tora2 ? runway.tora2 : '-' }}</td>
                                <td>{{ runway.lda1 ? runway.lda1 : '-' }} / {{ runway.lda2 ? runway.lda2 : '-' }}</td>
                                <td>{{ runway.papi1 ? 'y' : '-' }} / {{ runway.papi2 ? 'y' : '-' }}</td>
                            </tr>
                            <tr *ngIf="!this.airport.hasRunways()">
                                <td colspan="6"><em>No runway info available</em></td>
                            </tr>
                        </table>
                    </div>
                    <!-- radio tab -->
                    <div class="tab-pane" id="airport-radio" role="tabpanel" aria-labelledby="airport-radio-tab">
                        <table class="table table-sm table-striped table-condensed">
                            <tr>
                                <th colspan="2">Frequency</th>
                            </tr>
                            <tr *ngFor="let radio of this.airport.radios">
                                <td>{{ radio.description ? radio.description : radio.type }}</td>
                                <td>{{ radio.frequency }}</td>
                            </tr>
                            <tr *ngIf="!this.airport.hasRadios()">
                                <td colspan="2"><em>No radio info available</em></td>
                            </tr>
                        </table>
                    </div>
                    <!-- meteo tab -->
                    <div class="tab-pane" id="airport-meteo" role="tabpanel" aria-labelledby="airport-meteo-tab">
                        <div *ngIf="this.airport.metarTaf" class="ol-popup-metartaf">
                            <!-- METAR -->
                            <p *ngIf="this.airport.metarTaf.raw_metar">
                                METAR {{ this.airport.metarTaf.raw_metar }}
                                <br />
                                <small><i>({{ this.getMetarAgeString() }} old)</i></small>
                            </p>
                            <!-- TAF -->
                            <p *ngIf="this.airport.metarTaf.raw_taf" >
                                {{ this.airport.metarTaf.raw_taf }}
                                <br />
                                <small><i>({{ this.getTafAgeString() }} old)</i></small>
                            </p>
                        </div>
                        <!-- Meteogram -->
                        <p [hidden]="this.isMeteoGramVisible()"><small><em><a href="#" (click)="showMeteogram()">Show Meteogram &gt;&gt;</a></em></small></p>
                        <div [hidden]="!this.isMeteoGramVisible()">
                            <p>
                                Meteogram for {{ this.getName() }}
                                <app-map-overlay-windyiframe MEEPonDataNeeded="updateMeteogram()"></app-map-overlay-windyiframe>
                            </p>
                        </div>
                    </div>
                    <!-- notam tab -->
                    <div class="tab-pane" id="airport-notam" role="tabpanel" aria-labelledby="airport-notam-tab">
                        <div class="table-notam">
                            <p>NOTAMs for {{ this.getName() }} (Today &amp; Tomorrow)</p>
                            <table class="table table-striped table-condensed">
                                <tr *ngFor="let notam of this.airport.notams">
                                    <td><app-map-overlay-notam-item [notam]="notam"></app-map-overlay-notam-item></td>
                                </tr>
                                <tr *ngIf="!this.airport.notams || this.airport.notams.length == 0">
                                    <td><em>No NOTAMs available</em></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <!-- charts tab -->
                    <div class="tab-pane" id="airport-chart" role="tabpanel" aria-labelledby="airport-chart-tab">
                        <h5>AD Charts</h5>
                        <p *ngFor="let chart of this.airport.charts">
                            <i class="fas fa-file"></i>
                            {{ chart.type }}
                            <i>&copy; by <a href="{{ this.getChartSourceUrl(chart) }}" target="_blank">{{ this.getChartSourceName(chart) }}</a></i>
                        </p>
                    </div>
                </div>
                <!-- tab buttons -->
                <ul class="nav nav-pills" id="airport-tabs" role="tablist">
                    <li class="nav-item" title="Info">
                        <a class="nav-link active" id="airport-info-tab" data-toggle="pill" data-target="#airport-info" href="#" role="tab" aria-controls="airport-info" aria-selected="true" onclick="$('#airport-info-tab').tab('show'); return false;"><i class="fas fa-info"></i></a>
                    </li>
                    <li class="nav-item" title="Runways">
                        <a class="nav-link" id="airport-runway-tab" data-toggle="pill" data-target="#airport-runway" href="#" role="tab" aria-controls="airport-runway" aria-selected="false" onclick="$('#airport-runway-tab').tab('show'); return false;"><i class="fas fa-road"></i></a>
                    </li>
                    <li class="nav-item" title="Radios">
                        <a class="nav-link" id="airport-radio-tab" data-toggle="pill" data-target="#airport-radio" href="#" role="tab" aria-controls="airport-radio" aria-selected="false" onclick="$('#airport-radio-tab').tab('show'); return false;"><i class="fas fa-broadcast-tower"></i></a>
                    </li>
                    <li class="nav-item" title="METAR / TAF">
                        <a class="nav-link" id="airport-meteo-tab" data-toggle="pill" data-target="#airport-meteo" href="#" role="tab" aria-controls="airport-meteo" aria-selected="false" (click)="this.updateMeteogram()" onclick="$('#airport-meteo-tab').tab('show'); return false;"><i class="fas fa-cloud"></i></a>
                    </li>
                    <li class="nav-item" title="NOTAM">
                        <a class="nav-link" id="airport-notam-tab" data-toggle="pill" data-target="#airport-notam" href="#" role="tab" aria-controls="airport-notam" aria-selected="false" onclick="$('#airport-notam-tab').tab('show'); return false;"><i class="fas fas fa-exclamation-triangle"></i></a>
                    </li>
                    <li class="nav-item" title="Charts">
                        <a class="nav-link" id="airport-chart-tab" data-toggle="pill" data-target="#airport-chart" href="#" role="tab" aria-controls="airport-chart" aria-selected="false" onclick="$('#airport-chart-tab').tab('show'); return false;"><i class="fas fa-map"></i></a>
                    </li>
                </ul>
            </div>
            <hr/>
            <app-map-overlay-button-add-to-route></app-map-overlay-button-add-to-route>
            <app-map-overlay-button-set-alternate></app-map-overlay-button-set-alternate>
            <app-map-overlay-button-edit-waypoint></app-map-overlay-button-edit-waypoint>
            <app-map-overlay-button-remove-from-route></app-map-overlay-button-remove-from-route>
            <app-map-overlay-button-remove-alternate></app-map-overlay-button-remove-alternate>
        </div>
    </div>
</div>
