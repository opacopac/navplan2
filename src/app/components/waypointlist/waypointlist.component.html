<div class="table-responsive">
    <table id="waypoint_list" class="table table-sm table-hover" ui-sortable="sortableOptions">
        <thead>
        <tr>
            <th>Freq</th>
            <th>Callsign</th>
            <th>Checkpoint</th>
            <th>Alt</th>
            <th>MT</th>
            <th>Dist</th>
            <th>EET</th>
            <th>Remarks</th>
            <th>&nbsp;</th>
        </tr>
        </thead>
        <!-- trip checkpoints -->
        <tbody *ngFor="let wp of this.session.flightroute.waypoints; first as isFirst; last as isLast" class="grabbable">
        <tr [ngClass]="{ 'table-active': (isFirst || isLast) && wp.type === this.Waypointtype.airport }">
            <td>{{ wp.freq }}</td>
            <td>{{ wp.callsign }}</td>
            <td>{{ wp.checkpoint }}</td>
            <td><span *ngIf="wp.alt.isaltatlegstart">&#8739;</span><span [ngStyle]="{ 'text-decoration': (wp.alt.isminalt ? 'underline' : '') + (wp.alt.ismaxalt ? ' overline' : '') }">{{ wp.alt.alt }}</span>
            </td>
            <td>{{ wp.mtText }}</td>
            <td>{{ wp.distText }}</td>
            <td>{{ wp.eetText }}</td>
            <td>{{ wp.remark }}</td>
            <td>
                <button appIconButton
                        title="Edit Waypoint"
                        [iconClass]="'fas fa-edit'"
                        [color]="ButtonColor.ORANGE"
                        [size]="ButtonSize.SMALL"
                        data-toggle="modal"
                        data-target="#selectedWaypointDialog"
                        (click)="this.onEditWaypointClicked(wp)"></button>
                <button appIconButton
                        title="Remove Waypoint"
                        [iconClass]="'fas fa-trash'"
                        [color]="ButtonColor.RED"
                        [size]="ButtonSize.SMALL"
                        (click)="this.onRemoveWaypointClicked(wp)"></button>
            </td>
        </tr>
        <tr *ngIf="wp.supp_info" class="">
            <td class="text-right text-info">
                <small><i class="fas fa-info-circle" aria-hidden="true"></i></small>
            </td>
            <td colspan="8" ngClass=""><em>{{ wp.supp_info }}</em></td>
        </tr>
        </tbody>
        <tbody>
        <!-- trip total -->
        <tr *ngIf="this.session.flightroute.waypoints.length > 0">
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td><strong>{{ this.session.flightroute.fuel.tripTime }}</strong></td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <!-- alternate checkpoint -->
        <tr *ngIf="this.session.flightroute.fuel.alternateTime > 0">
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td><i><u>Alternate:</u></i></td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr *ngIf="this.session.flightroute.fuel.alternateTime > 0" [ngClass]="{ warning: true }">
            <td>{{ this.session.flightroute.alternate.freq }}</td>
            <td>{{ this.session.flightroute.alternate.callsign }}</td>
            <td>{{ this.session.flightroute.alternate.checkpoint }}</td>
            <td><span *ngIf="this.session.flightroute.alternate.alt.isaltatlegstart">&#8739;</span><span
                    [ngStyle]="{ 'text-decoration': (this.session.flightroute.alternate.alt.isminalt ? 'underline' : '') + (this.session.flightroute.alternate.alt.ismaxalt ? ' overline' : '') }">{{ this.session.flightroute.alternate.alt.alt }}</span>
            </td>
            <td>{{ this.session.flightroute.alternate.mtText }}</td>
            <td>{{ this.session.flightroute.alternate.distText }}</td>
            <td>{{ this.session.flightroute.alternate.eetText }}</td>
            <td>{{ this.session.flightroute.alternate.remark }}</td>
            <td>
                <button appIconButton
                        title="Edit Waypoint"
                        [iconClass]="'fas fa-edit'"
                        [color]="ButtonColor.ORANGE"
                        [size]="ButtonSize.SMALL"
                        data-toggle="modal"
                        data-target="#selectedWaypointDialog"
                        (click)="this.onEditWaypointClicked(this.session.flightroute.alternate)"></button>
                <button appIconButton
                        title="Remove Waypoint"
                        [iconClass]="'fas fa-trash'"
                        [color]="ButtonColor.RED"
                        [size]="ButtonSize.SMALL"
                        (click)="this.onRemoveAlternateClicked()"></button>
            </td>
        </tr>
        <!-- empty list -->
        <tr *ngIf="!this.session.flightroute || this.session.flightroute.waypoints.length == 0">
            <td colspan="9"><i>Empty route, add waypoints on the map.</i></td>
        </tr>
        </tbody>
    </table>
    <!-- reverse waypoints button -->
    <div class="form-group pull-right">
        <button type="button" class="btn btn-md btn-secondary" title="Reverse Waypoint Order" (click)="onReverseWaypointsClicked();"><i class="fas fa-sort"></i> Reverse Waypoints</button>&nbsp;
    </div>
</div>
<!-- edit waypoint dialog -->
<app-editwaypoint (onWaypointChanged)="onWaypointChanged()"></app-editwaypoint>
