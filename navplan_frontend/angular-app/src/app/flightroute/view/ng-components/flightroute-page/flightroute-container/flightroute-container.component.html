<form class="flightroute-form" [formGroup]="flightrouteForm">
    <!-- flighroute name / load / save / save copy buttons -->
    <app-flightroute-name-load-save
        [flightrouteName]="this.flightrouteName$ | async"
        [flightrouteId]="this.flightrouteId$ | async"
        [isUserLoggedIn]="this.isUserLoggedIn$ | async"
        (flightrouteNameChange)="this.onFlightrouteNameChanged($event)"
        (loadFlightrouteClick)="this.onLoadFlightrouteClick()"
        (saveFlightrouteClick)="this.onSaveFlightrouteClick()"
        (saveFlightrouteCopyClick)="this.onSaveFlightrouteCopyClick()"
    >
    </app-flightroute-name-load-save>

    <!-- aircraft speed -->
    <div>
        <!-- aircraft speed -->
        <mat-form-field appearance="outline" color="accent">
            <mat-label>Ground Speed</mat-label>
            <input matInput
                   #aircraftSpeed
                   type="number"
                   formControlName="aircraftSpeed"
                   maxlength="3"
                   size="3"
                   [value]="(this.aircraftSpeed$ | async).value"
                   (input)="this.onAircraftSpeedChanged(aircraftSpeed.value)"
            />
            <span matTextSuffix>kt</span>
            <mat-error *ngIf="this.flightrouteForm.controls.aircraftSpeed.invalid">
                Value must be a positive number!
            </mat-error>
        </mat-form-field>
    </div>

    <!-- waypoint list -->
    <app-waypoint-list
        [flightroute]="this.loadedFlightroute$ | async"
        (onEditWaypointClick)="this.onEditWaypointClick($event)"
        (onRemoveWaypointClick)="this.onRemoveWaypointClick($event)"
        (onReverseWaypointsClick)="this.onReverseWaypointsClick()"
    >
    </app-waypoint-list>

    <!-- comments -->
    <mat-form-field appearance="outline" color="accent" class="route-comments">
        <mat-label>Comments</mat-label>
        <textarea
            matInput
            #routeComments
            formControlName="flightrouteComments"
            cdkTextareaAutosize
            cdkAutosizeMinRows="3"
            cdkAutosizeMaxRows="6"
            maxlength="2048"
            [value]="this.routeComments$ | async"
            (input)="this.onFlightrouteCommentsChanged(routeComments.value)"
        >
        </textarea>
    </mat-form-field>
</form>
