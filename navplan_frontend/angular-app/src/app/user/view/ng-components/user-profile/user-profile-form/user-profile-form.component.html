@if (this.currentUser) {
  <form [formGroup]="changePwForm">
    <div class="main-container">
      <mat-form-field>
        <mat-label>E-Mail</mat-label>
        <input
          matInput
          type="email"
          formControlName="email"
          [readonly]="true"
          />
      </mat-form-field>
      <mat-form-field>
        <mat-label>Old Password</mat-label>
        <input
          matInput
          type="password"
          formControlName="oldPassword"
          #oldPassword
          required
          />
        <mat-error>Password is required (min. 6 characters)</mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>New Password</mat-label>
        <input
          matInput
          type="password"
          formControlName="newPassword"
          #newPassword
          required
          />
        <mat-error>Password is required (min. 6 characters)</mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Repeat New Password</mat-label>
        <input
          matInput
          type="password"
          formControlName="newPassword2"
          #newPassword2
          required
          />
        <mat-error>Password is required (min. 6 characters)</mat-error>
      </mat-form-field>
      @if (this.changePwForm.errors?.passwordMismatch && (newPassword2.value && newPassword2.value.length > 0)) {
        <mat-error
          >
          New passwords must be identical!
        </mat-error>
      }
      <div>
        <button
          mat-raised-button
          (click)="this.onChangePwClick.emit([this.currentUser, oldPassword.value, newPassword.value])"
          [disabled]="this.changePwForm.invalid"
          >
          Change Password
        </button>
      </div>
    </div>
  </form>
}
